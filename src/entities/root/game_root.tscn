[gd_scene load_steps=25 format=3 uid="uid://pgudwlq5efn0"]

[ext_resource type="Material" uid="uid://cp2te8i2ckj5o" path="res://src/materials/black_square.tres" id="2_n38sr"]
[ext_resource type="Material" uid="uid://dwgngqcfvi3s4" path="res://src/materials/red_square.tres" id="3_k6g81"]
[ext_resource type="PackedScene" uid="uid://ct07rpph3wvww" path="res://src/entities/vehicle/car/player_car.tscn" id="6_awmje"]
[ext_resource type="PackedScene" uid="uid://c7m8fswqpshy4" path="res://src/systems/ui/pause_menu.tscn" id="7_liv0r"]
[ext_resource type="PackedScene" uid="uid://ch2s1v2av6f0p" path="res://src/systems/ui/options_menu.tscn" id="8_njg2t"]
[ext_resource type="PackedScene" uid="uid://cukaeucupjo2e" path="res://src/systems/ui/debug_ui_controller.tscn" id="9_73xoc"]
[ext_resource type="PackedScene" uid="uid://bp5wletrm4dw2" path="res://src/entities/player/player_character.tscn" id="10_player"]
[ext_resource type="Script" uid="uid://dw3owa0i2p1f2" path="res://src/entities/player/PlayerWrapper.cs" id="11_pwrap"]
[ext_resource type="Script" uid="uid://c3b5xve2kalg" path="res://src/systems/network/RemotePlayerManager.cs" id="12_rplayer"]
[ext_resource type="Script" uid="uid://ygqck2ca07ti" path="res://src/systems/network/RemoteVehicleManager.cs" id="13_38sdm"]
[ext_resource type="PackedScene" uid="uid://dqsjudt64pb3u" path="res://src/entities/building/building_1/skyscraper_1.tscn" id="14_886vf"]
[ext_resource type="PackedScene" uid="uid://c68mijg2v2wkf" path="res://src/entities/jump_pad/jump_pad.tscn" id="15_l2d1b"]
[ext_resource type="Script" uid="uid://5whgjxft7d3o" path="res://src/systems/vehicle/VehicleSpawnManager.cs" id="16_vspawn"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_liv0r"]
sky_top_color = Color(0.53064, 0.646875, 0.808594, 1)
sky_horizon_color = Color(0.611765, 0.694118, 0.827451, 1)
ground_bottom_color = Color(0.652344, 0.652344, 0.652344, 1)
ground_horizon_color = Color(0.611389, 0.695429, 0.828125, 1)

[sub_resource type="Sky" id="Sky_njg2t"]
sky_material = SubResource("ProceduralSkyMaterial_liv0r")

[sub_resource type="Environment" id="Environment_k6g81"]
background_mode = 2
sky = SubResource("Sky_njg2t")
tonemap_mode = 1

[sub_resource type="Curve3D" id="Curve3D_qm2o8"]
closed = true
_data = {
"points": PackedVector3Array(-26.225464, 1.5325003, 176.31253, 26.225464, -1.5325003, -176.31253, -286.43634, -1.3658619, -157.13898, -116.639786, -0.07672596, -8.8272705, 116.639786, 0.07672596, 8.8272705, -15.189236, -2.8726215, -330.48996, -50.887177, -1.0012493, -115.192635, 50.887177, 1.0012493, 115.192635, 325.51028, -0.7812209, -89.87662, 200.06613, -1.0268545, -118.13846, -200.06613, 1.0268545, 118.13846, 184.418, 2.4034138, 276.51202, 116.17879, 0.7517357, 86.48633, -116.17879, -0.7517357, -86.48633, -183.07806, 2.4842172, 285.80838),
"tilts": PackedFloat32Array(0.2617994, 0.2617994, 0.2617994, 0.2617994, 0.2617994)
}
point_count = 5

[sub_resource type="Curve3D" id="Curve3D_38sdm"]
closed = true
_data = {
"points": PackedVector3Array(-29.25177, 0, -106.34547, 29.25177, 0, 106.34547, -3.1953125, 0, -65.187096, 149.56317, 0, -33.457, -149.56317, 0, 33.457, -299.86258, 3.0517578e-05, 373.1105, 12.774048, 9.1552734e-05, 118.83481, -12.774048, -9.1552734e-05, -118.83481, -710.5067, 0.00012207031, 109.31046, -63.089172, 0, 13.71698, 63.089172, 0, -13.71698, -423.20462, 3.0517578e-05, -141.34988),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[sub_resource type="BoxMesh" id="BoxMesh_2bu5k"]
size = Vector3(0.1, 5, 300)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_2bu5k"]
points = PackedVector3Array(-0.05, -2.5, -150, 0.05, -2.5, -150, -0.05, -2.5, 150, -0.05, 2.5, -150, 0.05, 2.5, -150, 0.05, -2.5, 150, -0.05, 2.5, 150, 0.05, 2.5, 150)

[sub_resource type="BoxMesh" id="BoxMesh_38sdm"]
size = Vector3(10, 10, 1)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_886vf"]
points = PackedVector3Array(-5.078371, -5.077377, -0.57936513, 4.7881784, 4.787241, 0.5, 4.7881784, -4.787241, 0.5, 5.078371, 5.077377, -0.57936513, -4.7881784, 4.787241, 0.5, 5.078371, -5.077377, -0.57936513, -5.078371, 5.077377, -0.57936513, -4.7881784, -4.787241, 0.5)

[sub_resource type="Curve3D" id="Curve3D_2bu5k"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 20, 0, -15.518671, -4.145767, -27.06517, 15.518671, 4.145767, 27.06517, -23.448, 0, 71.109, 0, 0, 0, 0, 0, 0, -106.276, 0, 142.767),
"tilts": PackedFloat32Array(0, 0, 0)
}
point_count = 3

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_38sdm"]
properties/0/path = NodePath(".:progress_ratio")
properties/0/spawn = true
properties/0/replication_mode = 1

[node name="GameRoot" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 20.3866, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="DirectionalLight3D"]
environment = SubResource("Environment_k6g81")

[node name="CSGTerrain" type="Node3D" parent="."]
metadata/_edit_group_ = true
metadata/_edit_lock_ = true

[node name="Ground" type="CSGBox3D" parent="CSGTerrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.25, -94.2223)
material_override = ExtResource("2_n38sr")
use_collision = true
size = Vector3(750, 0.5, 750)

[node name="Path3D" type="Path3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.9999622, -0.008691629, 0, 0.008691629, 0.9999622, 0, -8.51074, -55.8006)
curve = SubResource("Curve3D_qm2o8")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="Path3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 20.50203, 0)
material_override = ExtResource("3_k6g81")
use_collision = true
polygon = PackedVector2Array(-50, 0, 50, 1, 50, 1, 50, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 0.0
path_rotation = 2
path_rotation_accurate = false
path_local = true
path_continuous_u = true
path_u_distance = 1.0
path_joined = false

[node name="Path3D2" type="Path3D" parent="."]
transform = Transform3D(-5.9884634e-08, -1.37, 6.8412746e-15, 0.31279427, -1.3672672e-08, 1.333814, -1.333814, 5.830289e-08, 0.31279427, 374.3125, 86.03772, -516.8681)
curve = SubResource("Curve3D_38sdm")

[node name="PathFollow3D" type="PathFollow3D" parent="Path3D2"]
transform = Transform3D(-0.9641802, 0, -0.2652109, 0, 1, 0, 0.2652109, 0, -0.9641802, -3.1953125, 0, -65.187096)

[node name="skyscraper1" parent="Path3D2/PathFollow3D" instance=ExtResource("14_886vf")]
transform = Transform3D(-0.124179244, -4.4068753e-07, 0.99225986, -3.0061244e-08, 1, 4.403629e-07, -0.99225986, 2.4855403e-08, -0.124179244, 14.207611, 3.0517578e-05, -63.70018)

[node name="JumpPad" parent="." instance=ExtResource("15_l2d1b")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.5435, 0, -51.0122)

[node name="PauseMenu" parent="." instance=ExtResource("7_liv0r")]

[node name="OptionsMenu" parent="." instance=ExtResource("8_njg2t")]

[node name="DebugUI" parent="." instance=ExtResource("9_73xoc")]

[node name="RemotePlayerLabels" type="Node3D" parent="."]

[node name="RemotePlayers" type="Node3D" parent="."]
script = ExtResource("12_rplayer")

[node name="PlayerCharacter" parent="." instance=ExtResource("10_player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 88.74045, 1.05, -114.77704)

[node name="PlayerWrapper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 141.24045, 0, 30.722965)
script = ExtResource("11_pwrap")
PlayerPath = NodePath("../PlayerCharacter")

[node name="VehicleSpawns" type="Node3D" parent="."]

[node name="CarSpawnPoint" type="Marker3D" parent="VehicleSpawns"]
transform = Transform3D(-0.5945142, 0, -0.8040851, 0, 1, 0, 0.8040851, 0, -0.5945142, 105.95998, 1.2100546, -31.56152)

[node name="VehicleSpawn2" type="Marker3D" parent="VehicleSpawns"]
transform = Transform3D(0.34202, 0, 0.939693, 0, 1, 0, -0.939693, 0, 0.34202, 122.08298, 1.2, -7.3828964)

[node name="VehicleSpawn3" type="Marker3D" parent="VehicleSpawns"]
transform = Transform3D(-0.939693, 0, 0.34202, 0, 1, 0, -0.34202, 0, -0.939693, 147.7611, 1.2, -7.9932556)

[node name="VehicleSpawnManager" type="Node3D" parent="."]
script = ExtResource("16_vspawn")
VehicleScene = ExtResource("6_awmje")
SpawnPointsRootPath = NodePath("../VehicleSpawns")
MaxVehicles = 3

[node name="RemoteVehicles" type="Node3D" parent="."]
script = ExtResource("13_38sdm")
VehicleScene = ExtResource("6_awmje")

[node name="Ramp" type="StaticBody3D" parent="."]
transform = Transform3D(0.17084587, 0, 0.9852978, 0, 1, 0, -0.9852978, 0, 0.17084587, 4.266861, 4.032215, 12.885757)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ramp"]
transform = Transform3D(0.88970345, 0.45653903, 0, -0.45653903, 0.88970345, 0, 0, 0, 1, 1.0178925, 1.9836692, 0)
mesh = SubResource("BoxMesh_2bu5k")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="Ramp"]
transform = Transform3D(0.88970345, 0.45653903, 0, -0.45653903, 0.88970345, 0, 0, 0, 1, 1.0178925, 1.9836692, 0)
shape = SubResource("ConvexPolygonShape3D_2bu5k")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Ramp"]
transform = Transform3D(0.97900105, 0.17290926, -0.107981905, -0.17290926, 0.423741, -0.88912654, -0.1079819, 0.88912654, 0.44474047, -1.1718221, -1.8405948, 0.22788525)
mesh = SubResource("BoxMesh_38sdm")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ramp"]
transform = Transform3D(0.97900105, 0.17290926, -0.107981905, -0.17290926, 0.423741, -0.88912654, -0.1079819, 0.88912654, 0.44474047, -1.1718221, -1.8405948, 0.22788525)
shape = SubResource("ConvexPolygonShape3D_886vf")

[node name="Surf" type="Path3D" parent="."]
transform = Transform3D(0.42445764, -0.028023908, -0.905014, 0.018104218, 0.99958384, -0.022461263, 0.90526676, -0.0068507087, 0.42478833, 58.826405, 1.8856678, -19.275656)
curve = SubResource("Curve3D_2bu5k")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="Surf"]
use_collision = true
polygon = PackedVector2Array(0, 0, 3, 10, 6, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 1
path_interval = 0.01
path_simplify_angle = 0.0
path_rotation = 2
path_rotation_accurate = false
path_local = true
path_continuous_u = true
path_u_distance = 1.0
path_joined = false

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
root_path = NodePath("../Path3D2/PathFollow3D")
replication_interval = 1.0
replication_config = SubResource("SceneReplicationConfig_38sdm")
